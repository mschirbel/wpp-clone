<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Caso Santa Aurora - Celular da V√≠tima</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <main class="page">
    <section class="phone" aria-label="WhatsApp clone">
      <div id="home"></div>

      <input class="tab-input" type="radio" name="tab" id="tab-chats" checked />
      <input class="tab-input" type="radio" name="tab" id="tab-archived" />
      <input class="tab-input" type="radio" name="tab" id="tab-calls" />

      <header class="topbar">
        <div class="topbar__title">
          <span class="app-dot" aria-hidden="true"></span>
          <div>
            <h1>WhatsApp</h1>
            <p class="subtitle">online</p>
          </div>
        </div>
        <div class="topbar__actions">
          <button class="icon-btn">‚åï</button>
          <button class="icon-btn">‚ãÆ</button>
        </div>
      </header>

      <div class="search">
        <span class="search__icon">‚åï</span>
        <input class="search__input" type="text" placeholder="Pesquisar" />
      </div>

      <section class="content">

        <div class="screen screen--chats">
          <div class="section-head">
            <h2>Chats</h2>
            <span class="badge" id="badge-chats">0</span>
          </div>
          <div class="list" id="list-chats"></div>
        </div>

        <div class="screen screen--archived">
          <div class="section-head">
            <h2>Arquivados</h2>
            <span class="badge badge--subtle" id="badge-archived">0</span>
          </div>
          <div class="list" id="list-archived"></div>
        </div>

        <div class="screen screen--calls">
          <div class="section-head">
            <h2>Calls</h2>
            <span class="badge badge--subtle" id="badge-calls">0</span>
          </div>
          <div class="list" id="list-calls"></div>
        </div>
      </section>

      <nav class="bottomnav">
        <label class="tab" for="tab-chats">
          <span class="tab__icon">üí¨</span><span class="tab__text">Chats</span>
        </label>
        <label class="tab" for="tab-archived">
          <span class="tab__icon">üóÑÔ∏è</span><span class="tab__text">Archived</span>
        </label>
        <label class="tab" for="tab-calls">
          <span class="tab__icon">üìû</span><span class="tab__text">Calls</span>
        </label>
      </nav>

      <div id="chat-views-container"></div>

    </section>
  </main>

  <script>
    const GAME_DATA = {
      // LISTA DE CONVERSAS ATIVAS
      chats: [
        {
          name: "Clara ü§ç",
          time: "19:35",
          lastMessage: "Vai tranquila. Qualquer coisa grita.",
          unread: 0,
          photo: ""
        },
        {
          name: "N√∫mero Desconhecido",
          time: "22:45",
          lastMessage: "Sei que voc√™ t√° l√° embaixo.",
          unread: 1,
          photo: ""
        },
        {
          name: "Marcos (Chefe)",
          time: "16:25",
          lastMessage: "Amanh√£ a gente resolve tudo. Eu prometo.",
          unread: 0,
          photo: ""
        },
        {
          name: "Sra. Helena",
          time: "13:50",
          lastMessage: "Se n√£o pedir demiss√£o, eu acabo com vc.",
          unread: 0,
          photo: ""
        },
        {
          name: "üè¢ Condom√≠nio Santa Aurora",
          time: "Ontem",
          lastMessage: "Ricardo S√≠ndico: Manuten√ß√£o Elevadores...",
          unread: 3,
          muted: true,
          photo: ""
        },
        {
          name: "Vagas & Oportunidades SP",
          time: "Ontem",
          lastMessage: "Ol√°, tenho interesse na vaga...",
          unread: 0,
          photo: ""
        }
      ],

      // LISTA DE ARQUIVADOS
      archived: [
        {
          name: "M√£e",
          time: "Dez 28",
          lastMessage: "Filha, depositei o dinheiro do aluguel.",
          unread: 0,
          photo: ""
        },
        {
          name: "Ex-Namorado (Pedro)",
          time: "Jan 02",
          lastMessage: "Para de me ligar, J√∫lia. Acabou.",
          unread: 0,
          photo: ""
        }
      ],

      // HIST√ìRICO DE CHAMADAS
      calls: [
        { nameOrNumber: "Marcos (Chefe)", time: "Ontem 21:15", direction: "in", status: "missed", duration: "" },
        { nameOrNumber: "Clara ü§ç", time: "Ontem 14:40", direction: "out", status: "answered", duration: "14 min" },
        { nameOrNumber: "N√∫mero Desconhecido", time: "Ontem 12:00", direction: "in", status: "missed", duration: "" },
        { nameOrNumber: "M√£e", time: "Sexta", direction: "out", status: "answered", duration: "32 min" }
      ],

      // CONTE√öDO DAS MENSAGENS (DIRE√á√ÉO CORRIGIDA)
      messages: {
        "Clara ü§ç": [
          { type: "out", text: "Amiga, o clima t√° horr√≠vel aqui. A Helena me olhou com um √≥dio hj...", time: "14:00" },
          { type: "in", text: "Eu te avisei, Ju. Ela √© perigosa. Ouvi ela gritando no telefone que ia 'dar um fim nisso'.", time: "14:05" },
          { type: "out", text: "Vc acha que ela sabe do Marcos?", time: "14:06" },
          { type: "in", text: "Certeza. O Marcos √© mole, deve ter deixado rastro. Se cuida, t√°?", time: "14:10" },
          { type: "in", text: "Nossa, t√¥ mto enjoada hj. Acho que minha press√£o caiu. Vou ficar deitada aqui no quarto qnd a Dona Beatriz sair.", time: "14:12" },
          { type: "dayline", text: "Hoje" },
          { type: "out", text: "Vou descer pra lavanderia mais tarde, qnd a Helena dormir. N√£o quero cruzar com ela.", time: "19:30" },
          { type: "in", text: "Vai tranquila. Qualquer coisa grita.", time: "19:35" }
        ],

        "Marcos (Chefe)": [
          { type: "out", text: "Precisamos conversar. A Clara disse que a Helena t√° furiosa.", time: "16:00" },
          { type: "in", text: "J√∫lia, n√£o escreve isso aqui. A Helena pega meu celular.", time: "16:15" },
          { type: "out", "text": "Eu n√£o aguento mais ser segredo, Marcos. Vc prometeu que ia resolver.", "time": "16:16" },
          { type: "in", text: "E eu vou. Mas hj n√£o. Hj eu tenho aquela reuni√£o importante com o Jap√£o no escrit√≥rio (1001).", time: "16:20" },
          { type: "out", text: "Posso subir l√° depois?", time: "16:21" },
          { type: "in", text: "N√ÉO. Hoje n√£o sobe ningu√©m. Vou ficar trancado em call a noite toda. Amanh√£ a gente resolve tudo. Eu prometo.", time: "16:25" }
        ],

        "Sra. Helena": [
          { type: "in", text: "J√∫lia, onde voc√™ colocou a camisa social azul do Marcos?", time: "09:00" },
          { type: "out", text: "Bom dia Sra. Helena. Est√° na lavanderia, vou passar hoje.", time: "09:05" },
          { type: "in", text: "Voc√™ est√° muito desleixada ultimamente. Acho que sua cabe√ßa est√° em outro lugar.", time: "09:10" },
          { type: "dayline", text: "Hoje" },
          { type: "in", text: "Encontrei isso no escrit√≥rio do Marcos. Esse batom n√£o √© meu.", time: "13:45" },
          { type: "in", text: "Eu sei o jogo que voc√™ est√° jogando.", time: "13:46" },
          { type: "in", text: "Aproveite enquanto pode. Pessoas como voc√™ s√£o descart√°veis. Se voc√™ n√£o pedir demiss√£o at√© amanh√£, eu vou garantir que voc√™ nunca mais consiga emprego nem limpando ch√£o.", time: "13:50" }
        ],

        "üè¢ Condom√≠nio Santa Aurora": [
          { type: "dayline", text: "Ontem" },
          { type: "in", text: "Ricardo S√≠ndico: ‚ö†Ô∏è Aviso de Manuten√ß√£o", time: "08:00" },
          { type: "in", text: "A manuten√ß√£o do elevador social foi conclu√≠da. O motor foi trocado.", time: "08:01" },
          { type: "in", text: "Aten√ß√£o: O elevador est√° mais r√°pido. Medimos, quase 2 segundos por andar.", time: "08:02" },
          { type: "in", text: "Nota: O display digital queimou e n√£o mostra o andar atual. Pe√ßa de reposi√ß√£o chega em 30 dias.", time: "08:03" }
        ],

        "Vagas & Oportunidades SP": [
          { type: "in", text: "+55 11 99999-1234: Vaga Auxiliar de Limpeza - Zona Sul.", time: "Ontem" },
          { type: "in", text: "+55 11 98888-5678: Procuro Bab√° para finais de semana no Morumbi. Paga-se bem.", time: "Ontem" },
          { type: "out", text: "Ol√°, tenho interesse na vaga de bab√°. Tenho refer√™ncias.", time: "Ontem" }
        ],

        "N√∫mero Desconhecido": [
          { type: "dayline", text: "15 de Jan" },
          { type: "in", text: "VADIA.", time: "23:14" },
          { type: "dayline", "text": "Hoje" },
          { type: "in", text: "Sei que voc√™ t√° l√° embaixo.", time: "22:45" }
        ],

        "M√£e": [
          { type: "in", text: "Filha, depositei o dinheiro do aluguel.", time: "Dez 28" },
          { type: "out", text: "Obrigada m√£e! Te amo.", time: "Dez 28" }
        ],
        "Ex-Namorado (Pedro)": [
          { type: "in", text: "Eu sinto sua falta...", time: "Jan 02" },
          { type: "out", text: "Para de me ligar, Pedro. Acabou.", time: "Jan 02" }
        ]
      }
    };

    // --- L√ìGICA DO SISTEMA ---
    const createId = (name) => 'chat-' + name.replace(/[^a-zA-Z0-9]/g, '').toLowerCase();

    function initApp() {
      renderList(GAME_DATA.chats, 'list-chats', 'badge-chats');
      renderList(GAME_DATA.archived, 'list-archived', 'badge-archived');
      renderCalls(GAME_DATA.calls);

      const allConversations = [...GAME_DATA.chats, ...GAME_DATA.archived];
      renderChatViews(allConversations, GAME_DATA.messages);
    }

    function renderList(items, containerId, badgeId) {
      const container = document.getElementById(containerId);
      const badge = document.getElementById(badgeId);

      if (badge) badge.textContent = items ? items.length : 0;
      container.innerHTML = '';

      items.forEach(item => {
        const chatId = createId(item.name);
        const initial = item.name.charAt(0);

        let pillHtml = '';
        if (item.muted) pillHtml = `<span class="pill pill--muted">M</span>`;
        else if (item.unread > 0) pillHtml = `<span class="pill">${item.unread}</span>`;

        const html = `
            <a class="row row--chat row-link" href="#${chatId}">
              <div class="avatar" data-initial="${initial}">
                 ${item.photo ? `<img src="${item.photo}" class="avatar-img" onerror="this.style.display='none'">` : ''}
              </div>
              <div class="row__main">
                <div class="row__top">
                  <strong>${item.name}</strong>
                  <span class="meta">${item.time}</span>
                </div>
                <div class="row__bottom">
                  <span class="preview">${item.lastMessage}</span>
                  ${pillHtml}
                </div>
              </div>
            </a>
          `;
        container.innerHTML += html;
      });
    }

    function renderCalls(calls) {
      const container = document.getElementById('list-calls');
      document.getElementById('badge-calls').textContent = calls ? calls.length : 0;
      container.innerHTML = '';

      calls.forEach(call => {
        const initial = call.nameOrNumber.charAt(0);
        const icon = call.direction === 'out' ? '‚Üó' : '‚Üô';
        const typeClass = call.direction === 'out' ? 'call-tag--out' : 'call-tag--in';
        const statusText = call.status === 'missed' ? 'N√£o atendida' : (call.duration || 'Cancelada');

        const html = `
            <div class="row row--call">
              <div class="avatar avatar--call" data-initial="${initial}"></div>
              <div class="row__main">
                <div class="row__top">
                  <strong>${call.nameOrNumber}</strong>
                  <span class="meta">${call.time}</span>
                </div>
                <div class="row__bottom">
                  <span class="preview">
                    <span class="call-tag ${typeClass}">${icon}</span>
                    ${call.direction === 'in' ? 'Entrada' : 'Sa√≠da'} ‚Ä¢ ${statusText}
                  </span>
                  <span class="call-icon">üìû</span>
                </div>
              </div>
            </div>
          `;
        container.innerHTML += html;
      });
    }

    function renderChatViews(list, messagesData) {
      const container = document.getElementById('chat-views-container');
      container.innerHTML = '';

      list.forEach(chat => {
        const chatId = createId(chat.name);
        const initial = chat.name.charAt(0);
        const msgs = messagesData[chat.name] || [];

        let msgsHtml = '';

        if (msgs.length === 0) {
          msgsHtml = `<div class="dayline"><span>In√≠cio da conversa criptografada</span></div>`;
        } else {
          msgs.forEach(m => {
            if (m.type === 'dayline') {
              msgsHtml += `<div class="dayline"><span>${m.text}</span></div>`;
            } else {
              msgsHtml += `<div class="bubble bubble--${m.type}">${m.text} <span class="time">${m.time}</span></div>`;
            }
          });
        }

        const html = `
            <section id="${chatId}" class="chatview" aria-label="Conversa com ${chat.name}">
              <header class="chatbar">
                <a class="back" href="#home">‚Äπ</a>
                <div class="chatbar__who">
                  <div class="avatar avatar--small" data-initial="${initial}">
                    ${chat.photo ? `<img src="${chat.photo}" class="avatar-img" onerror="this.style.display='none'">` : ''}
                  </div>
                  <div>
                    <strong>${chat.name}</strong>
                    <div class="chatbar__sub">online</div>
                  </div>
                </div>
                <div class="chatbar__actions">
                  <button class="icon-btn">üìû</button>
                  <button class="icon-btn">‚ãÆ</button>
                </div>
              </header>

              <div class="chatmessages">
                ${msgsHtml}
              </div>

              <footer class="chatinput">
                <button class="chip">üôÇ</button>
                <input class="chatinput__field" type="text" placeholder="Mensagem" readonly />
                <button class="chip chip--send">‚û§</button>
              </footer>
            </section>
          `;
        container.innerHTML += html;
      });
    }

    initApp();
  </script>
</body>

</html>